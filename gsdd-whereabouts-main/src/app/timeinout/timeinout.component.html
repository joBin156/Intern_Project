<app-sidebar></app-sidebar>
<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-12 col-md-6">
      <div class="card shadow-sm">
        <div class="card-header text-center">
          <h4>Time In & Time Out</h4>
        </div>
        <div class="card-body">
          <div class="mb-3">
            <div class="d-flex justify-content-between">
              <p class="font-weight-bold">Current Time:</p>
              <p class="font-weight-bold">{{ CURRENT_TIME_DISPLAY_ONLY }}</p>
            </div>
          </div>

          <div class="mb-4">
            <div class="d-flex justify-content-between">
              <p>Time In:</p>
              <p class="font-weight-bold">{{ getTimeIn() }}</p>
            </div>
            <div class="d-flex justify-content-between">
              <p>Time Out:</p>
              <p class="font-weight-bold">{{ getTimeOut() }}</p>
            </div>
          </div>

          <div class="d-flex justify-content-end">
            <button
              *ngIf="!check_time_out"
              [disabled]="check_time_out"
              type="button"
              (click)="openTimeInOutModal()"
              class="btn btn-outline-dark"
            >
              {{ getTimeIn() !== "--" ? "Time Out" : "Time In" }}
            </button>
          </div>
        </div>

        <!-- Late and Overtime Messages -->
        <div *ngIf="lateMessage" class="alert alert-danger m-3">{{ lateMessage }}</div>
        <div *ngIf="overtimeMessage" class="alert alert-success m-3">{{ overtimeMessage }}</div>

        <div class="card-footer text-center">
          <button
            routerLink="/dashboard"
            (click)="goToTimeSheet()"
            class="btn btn-link text-danger"
          >
            Modify my timesheet
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Timepicker Modal -->
  <div class="modal fade" id="timepicker-modal" tabindex="-1" aria-labelledby="timepickerModalLabel" aria-hidden="true" [class.show]="isOpen$ | async">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="timepickerModalLabel">Pick Time</h5>
          <button type="button" class="close" (click)="closeTimeInOutModal()" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form>
            <div class="form-group">
              <label for="time">Select Time</label>
              <input
                type="time"
                id="time"
                name="time"
                class="form-control"
                [(ngModel)]="timeDisplay"
                (ngModelChange)="onTimeChange($event)"
                min="09:00"
                max="18:00"
                required
              />
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="closeTimeInOutModal()">Close</button>
          <button
            type="button"
            (click)="getTimeIn() !== '--' ? timeOut() : timeIn()"
            class="btn btn-primary"
          >
            {{ getTimeIn() !== "--" ? "Time Out" : "Time In" }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
